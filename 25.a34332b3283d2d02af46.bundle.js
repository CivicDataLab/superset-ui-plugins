(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1535:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react=__webpack_require__(1),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(0),prop_types_default=__webpack_require__.n(prop_types),src=__webpack_require__(704),d3_scale_src=__webpack_require__(29);function _extends(){return(_extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c])Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a}).apply(this,arguments)}var DEFAULT_COLORS=["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"],propTypes={className:prop_types_default.a.string,width:prop_types_default.a.number,height:prop_types_default.a.number,data:prop_types_default.a.arrayOf(prop_types_default.a.shape({y:prop_types_default.a.number})).isRequired,bands:prop_types_default.a.number,colors:prop_types_default.a.arrayOf(prop_types_default.a.string),colorScale:prop_types_default.a.string,mode:prop_types_default.a.string,offsetX:prop_types_default.a.number,title:prop_types_default.a.string,yDomain:prop_types_default.a.arrayOf(prop_types_default.a.number)},defaultProps={className:"",width:800,height:20,bands:DEFAULT_COLORS.length>>1,colors:DEFAULT_COLORS,colorScale:"series",mode:"offset",offsetX:0,title:"",yDomain:void 0},HorizonRow=function(a){function b(){return a.apply(this,arguments)||this}!function _inheritsLoose(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}(b,a);var c=b.prototype;return c.componentDidMount=function componentDidMount(){this.drawChart()},c.componentDidUpdate=function componentDidUpdate(){this.drawChart()},c.componentWillUnmount=function componentWillUnmount(){this.canvas=null},c.drawChart=function drawChart(){if(this.canvas){var a=this.props,c=a.data,d=a.yDomain,e=a.width,f=a.height,g=a.bands,h=a.colors,j=a.colorScale,k=a.offsetX,l=a.mode,m="change"===j?c.map(function(a){return _extends({},a,{y:a.y-c[0].y})}):c,n=this.canvas.getContext("2d");n.imageSmoothingEnabled=!1,n.clearRect(0,0,e,f),n.setTransform(1,0,0,1,0,0),n.translate(.5,.5);var o=e/m.length,p=Math.floor(Math.max(0,-k/o)),q=Math.floor(Math.min(m.length,p+e/o));if(p>m.length)return;for(var r,s,t=d||Object(src.a)(m,function(a){return a.y}),u=t[0],v=t[1],w=Object(d3_scale_src.b)().domain([0,Math.max(-u,v)]).range([0,f]),x=!1,y=0;y<g;y+=1){n.fillStyle=h[g+y],s=(y+1-g)*f,w.range([g*f+s,s]);for(var z=p;z<q;z++)0>=(r=m[z].y)?x=!0:void 0!==r&&n.fillRect(k+z*o,w(r),o+1,w(0)-w(r))}if(x){"offset"===l&&(n.translate(0,f),n.scale(1,-1));for(var i=0;i<g;i++){n.fillStyle=h[g-i-1],s=(i+1-g)*f,w.range([g*f+s,s]);for(var A=p;A<q;A++)!(0<=(r=m[A].y))&&n.fillRect(k+A*o,w(-r),o+1,w(0)-w(-r))}}}},c.render=function render(){var a=this,b=this.props,c=b.className,d=b.title,e=b.width,f=b.height;return react_default.a.createElement("div",{className:"horizon-row "+c},react_default.a.createElement("span",{className:"title"},d),react_default.a.createElement("canvas",{width:e,height:f,ref:function ref(b){a.canvas=b}}))},b}(react_default.a.PureComponent);HorizonRow.propTypes=propTypes,HorizonRow.defaultProps=defaultProps;var esm_HorizonRow=HorizonRow;var HorizonChart_propTypes={className:prop_types_default.a.string,width:prop_types_default.a.number,seriesHeight:prop_types_default.a.number,data:prop_types_default.a.arrayOf(prop_types_default.a.shape({key:prop_types_default.a.arrayOf(prop_types_default.a.string),values:prop_types_default.a.arrayOf(prop_types_default.a.shape({y:prop_types_default.a.number}))})).isRequired,bands:prop_types_default.a.number,colors:prop_types_default.a.arrayOf(prop_types_default.a.string),colorScale:prop_types_default.a.string,mode:prop_types_default.a.string,offsetX:prop_types_default.a.number},HorizonChart_defaultProps={className:"",width:800,seriesHeight:20,bands:Math.floor(DEFAULT_COLORS.length/2),colors:DEFAULT_COLORS,colorScale:"series",mode:"offset",offsetX:0},HorizonChart=function(a){function b(){return a.apply(this,arguments)||this}return function HorizonChart_inheritsLoose(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}(b,a),b.prototype.render=function render(){var a,b=this.props,c=b.className,d=b.width,e=b.data,f=b.seriesHeight,g=b.bands,h=b.colors,i=b.colorScale,j=b.mode,k=b.offsetX;if("overall"===i){var l=e.reduce(function(a,b){return a.concat(b.values)},[]);a=Object(src.a)(l,function(a){return a.y})}return react_default.a.createElement("div",{className:"superset-legacy-chart-horizon "+c},e.map(function(b){return react_default.a.createElement(esm_HorizonRow,{key:b.key,width:d,height:f,title:b.key.join(", "),data:b.values,bands:g,colors:h,colorScale:i,mode:j,offsetX:k,yDomain:a})}))},b}(react_default.a.PureComponent);HorizonChart.propTypes=HorizonChart_propTypes,HorizonChart.defaultProps=HorizonChart_defaultProps;__webpack_exports__.default=HorizonChart},704:function(module,__webpack_exports__,__webpack_require__){"use strict";var ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};var compare;1===(compare=ascending).length&&(compare=function ascendingComparator(f){return function(d,x){return ascending(f(d),x)}}(compare));var extent=function(values,valueof){let min,max;if(void 0===valueof)for(let value of values)null!=value&&value>=value&&(void 0===min?min=max=value:(min>value&&(min=value),max<value&&(max=value)));else{let index=-1;for(let value of values)null!=(value=valueof(value,++index,values))&&value>=value&&(void 0===min?min=max=value:(min>value&&(min=value),max<value&&(max=value)))}return[min,max]};var array_array=Array.prototype,range=(array_array.slice,array_array.map,function(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);__webpack_require__.d(__webpack_exports__,"a",function(){return extent}),__webpack_require__.d(__webpack_exports__,"b",function(){return range})}}]);
//# sourceMappingURL=25.a34332b3283d2d02af46.bundle.js.map
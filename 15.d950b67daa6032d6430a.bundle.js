(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{641:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var a,_chart=__webpack_require__(0),_Calendar=(a=__webpack_require__(773))&&a.__esModule?a:{default:a};var _default=(0,_chart.reactify)(_Calendar.default);exports.default=_default},773:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var _propTypes=_interopRequireDefault(__webpack_require__(87)),_d3Array=__webpack_require__(774),_d3Selection=__webpack_require__(705),_color=__webpack_require__(88),_numberFormat=__webpack_require__(659),_timeFormat=__webpack_require__(690),_calHeatmap=_interopRequireDefault(__webpack_require__(775));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}__webpack_require__(778),__webpack_require__(780);var convertUTCTS=function(a){return function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())}(new Date(a)).getTime()},propTypes={data:_propTypes.default.shape({data:_propTypes.default.object,domain:_propTypes.default.string,range:_propTypes.default.number,start:_propTypes.default.number,subdomain:_propTypes.default.string}),height:_propTypes.default.number,cellPadding:_propTypes.default.number,cellRadius:_propTypes.default.number,cellSize:_propTypes.default.number,linearColorScheme:_propTypes.default.string,showLegend:_propTypes.default.bool,showMetricName:_propTypes.default.bool,showValues:_propTypes.default.bool,steps:_propTypes.default.number,timeFormat:_propTypes.default.string,valueFormat:_propTypes.default.string,verboseMap:_propTypes.default.object};function Calendar(a,b){var c=b.data,d=b.height,e=b.cellPadding,f=void 0===e?3:e,g=b.cellRadius,h=void 0===g?0:g,i=b.cellSize,j=void 0===i?10:i,k=b.linearColorScheme,l=b.showLegend,m=b.showMetricName,n=b.showValues,o=b.steps,p=b.timeFormat,q=b.valueFormat,r=b.verboseMap,s=(0,_numberFormat.getNumberFormatter)(q),t=(0,_timeFormat.getTimeFormatter)(p),u=(0,_d3Selection.select)(a).style("height",d);u.selectAll("*").remove();var v=u.append("div"),w=n?function(a,b){return s(b)}:null,x={};Object.keys(c.data).forEach(function(a){x[a]={},Object.keys(c.data[a]).forEach(function(b){x[a][convertUTCTS(1e3*b)/1e3]=c.data[a][b]})}),Object.keys(x).forEach(function(a){var b=v.append("div");m&&b.text("Metric: "+(r[a]||a));var d=x[a],e=(0,_d3Array.extent)(Object.keys(d),function(a){return d[a]}),g=(e[1]-e[0])/(o-1),i=(0,_color.getSequentialSchemeRegistry)().get(k).createLinearScale(e),n=(0,_d3Array.range)(o).map(function(a){return e[0]+g*a}),p=n.map(i);(new _calHeatmap.default).init({start:convertUTCTS(c.start),data:d,itemSelector:b.node(),legendVerticalPosition:"top",cellSize:j,cellPadding:f,cellRadius:h,legendCellSize:j,legendCellPadding:2,legendCellRadius:h,tooltip:!0,domain:c.domain,subDomain:c.subdomain,range:c.range,browsing:!0,legend:n,legendColors:{colorScale:i,min:p[0],max:p[p.length-1],empty:"white"},displayLegend:l,itemName:"",valueFormatter:s,timeFormatter:t,subDomainTextFormat:w})})}Calendar.displayName="Calendar",Calendar.propTypes=propTypes;var _default=Calendar;exports.default=_default},775:function(module,exports,__webpack_require__){"use strict";var e,_d3Tip=(e=__webpack_require__(711))&&e.__esModule?e:{default:e};exports.__esModule=!0,exports.default=void 0,__webpack_require__(776);var d3=__webpack_require__(661),CalHeatMap=(d3=__webpack_require__(661),function(){var n=Math.min,i=Math.floor,a=Math.max;function t(e,t){var o=r.options.cellSize*r._domainType[r.options.subDomain].column(e)+r.options.cellPadding*r._domainType[r.options.subDomain].column(e);return 2===arguments.length&&!0===t?o+=r.domainHorizontalLabelWidth+r.options.domainGutter+r.options.domainMargin[1]+r.options.domainMargin[3]:o}function o(e,t){var o=r.options.cellSize*r._domainType[r.options.subDomain].row(e)+r.options.cellPadding*r._domainType[r.options.subDomain].row(e);return 2===arguments.length&&!0===t&&(o+=r.options.domainGutter+r.domainVerticalLabelHeight+r.options.domainMargin[0]+r.options.domainMargin[2]),o}var r=this;for(var l in r.tip=(0,_d3Tip.default)().attr("class","d3-tip").direction("n").offset([-5,0]).html(function(e){return"\n      "+r.options.timeFormatter(e.t)+": <strong>"+r.options.valueFormatter(e.v)+"</strong>\n    "}),r.legendTip=(0,_d3Tip.default)().attr("class","d3-tip").direction("n").offset([-5,0]).html(function(e){return r.options.valueFormatter(e)}),this.allowedDataType=["json","csv","tsv","txt"],this.options={itemSelector:"#cal-heatmap",paintOnLoad:!0,range:12,cellSize:10,cellPadding:2,cellRadius:0,domainGutter:2,domainMargin:[0,0,0,0],valueFormatter:function(e){return e},timeFormatter:function(e){return e},domain:"hour",subDomain:"min",colLimit:null,rowLimit:null,weekStartOnMonday:!0,start:new Date,minDate:null,maxDate:null,data:"",dataType:this.allowedDataType[0],dataPostPayload:null,dataRequestHeaders:null,considerMissingDataAsZero:!1,loadOnInit:!0,verticalOrientation:!1,domainDynamicDimension:!0,label:{position:"bottom",align:"center",offset:{x:0,y:0},rotate:null,width:100,height:null},legend:[10,20,30,40],displayLegend:!0,legendCellSize:10,legendCellPadding:2,legendMargin:[0,0,0,0],legendVerticalPosition:"bottom",legendHorizontalPosition:"left",legendOrientation:"horizontal",legendColors:null,highlight:[],itemName:["item","items"],domainLabelFormat:null,subDomainTitleFormat:{empty:"{date}",filled:"{count} {name} {connector} {date}"},subDomainDateFormat:null,subDomainTextFormat:null,legendTitleFormat:{lower:"less than {min} {name}",inner:"between {down} and {up} {name}",upper:"more than {max} {name}"},animationDuration:500,nextSelector:!1,previousSelector:!1,itemNamespace:"cal-heatmap",tooltip:!1,onClick:null,afterLoad:null,afterLoadNextDomain:null,afterLoadPreviousDomain:null,onComplete:null,afterLoadData:function(e){return e},afterUpdate:null,onMaxDomainReached:null,onMinDomainReached:null},this._domainType={min:{name:"minute",level:10,maxItemNumber:60,defaultRowNumber:10,defaultColumnNumber:6,row:function(e){return r.getSubDomainRowNumber(e)},column:function(e){return r.getSubDomainColumnNumber(e)},position:{x:function(e){return i(e.getMinutes()/r._domainType.min.row(e))},y:function(e){return e.getMinutes()%r._domainType.min.row(e)}},format:{date:"%H:%M, %A %B %-e, %Y",legend:"",connector:"at"},extractUnit:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()).getTime()}},hour:{name:"hour",level:20,maxItemNumber:function(e){switch(r.options.domain){case"day":return 24;case"week":return 168;case"month":return 24*(r.options.domainDynamicDimension?r.getDayCountInMonth(e):31)}},defaultRowNumber:6,defaultColumnNumber:function(e){switch(r.options.domain){case"day":return 4;case"week":return 28;case"month":return r.options.domainDynamicDimension?r.getDayCountInMonth(e):31}},row:function(e){return r.getSubDomainRowNumber(e)},column:function(e){return r.getSubDomainColumnNumber(e)},position:{x:function(e){return"month"===r.options.domain?0<r.options.colLimit||0<r.options.rowLimit?i((e.getHours()+24*(e.getDate()-1))/r._domainType.hour.row(e)):i(e.getHours()/r._domainType.hour.row(e))+4*(e.getDate()-1):"week"===r.options.domain?0<r.options.colLimit||0<r.options.rowLimit?i((e.getHours()+24*r.getWeekDay(e))/r._domainType.hour.row(e)):i(e.getHours()/r._domainType.hour.row(e))+4*r.getWeekDay(e):i(e.getHours()/r._domainType.hour.row(e))},y:function(e){var t=e.getHours();if(0<r.options.colLimit||0<r.options.rowLimit)switch(r.options.domain){case"month":t+=24*(e.getDate()-1);break;case"week":t+=24*r.getWeekDay(e)}return i(t%r._domainType.hour.row(e))}},format:{date:"%Hh, %A %B %-e, %Y",legend:"%H:00",connector:"at"},extractUnit:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()).getTime()}},day:{name:"day",level:30,maxItemNumber:function(e){switch(r.options.domain){case"week":return 7;case"month":return r.options.domainDynamicDimension?r.getDayCountInMonth(e):31;case"year":return r.options.domainDynamicDimension?r.getDayCountInYear(e):366}},defaultColumnNumber:function(e){switch(e=new Date(e),r.options.domain){case"week":return 1;case"month":return r.options.domainDynamicDimension&&!r.options.verticalOrientation?r.getWeekNumber(new Date(e.getFullYear(),e.getMonth()+1,0))-r.getWeekNumber(e)+1:6;case"year":return r.options.domainDynamicDimension?r.getWeekNumber(new Date(e.getFullYear(),11,31))-r.getWeekNumber(new Date(e.getFullYear(),0))+1:54}},defaultRowNumber:7,row:function(e){return r.getSubDomainRowNumber(e)},column:function(e){return r.getSubDomainColumnNumber(e)},position:{x:function(e){switch(r.options.domain){case"week":return i(r.getWeekDay(e)/r._domainType.day.row(e));case"month":return 0<r.options.colLimit||0<r.options.rowLimit?i((e.getDate()-1)/r._domainType.day.row(e)):r.getWeekNumber(e)-r.getWeekNumber(new Date(e.getFullYear(),e.getMonth()));case"year":return 0<r.options.colLimit||0<r.options.rowLimit?i((r.getDayOfYear(e)-1)/r._domainType.day.row(e)):r.getWeekNumber(e)}},y:function(e){var t=r.getWeekDay(e);if(0<r.options.colLimit||0<r.options.rowLimit)switch(r.options.domain){case"year":t=r.getDayOfYear(e)-1;break;case"week":t=r.getWeekDay(e);break;case"month":t=e.getDate()-1}return i(t%r._domainType.day.row(e))}},format:{date:"%A %B %-e, %Y",legend:"%e %b",connector:"on"},extractUnit:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()}},week:{name:"week",level:40,maxItemNumber:54,defaultColumnNumber:function(e){switch(e=new Date(e),r.options.domain){case"year":return r._domainType.week.maxItemNumber;case"month":return r.options.domainDynamicDimension?r.getWeekNumber(new Date(e.getFullYear(),e.getMonth()+1,0))-r.getWeekNumber(e):5}},defaultRowNumber:1,row:function(e){return r.getSubDomainRowNumber(e)},column:function(e){return r.getSubDomainColumnNumber(e)},position:{x:function(e){switch(r.options.domain){case"year":return i(r.getWeekNumber(e)/r._domainType.week.row(e));case"month":return i(r.getMonthWeekNumber(e)/r._domainType.week.row(e))}},y:function(e){return r.getWeekNumber(e)%r._domainType.week.row(e)}},format:{date:"%B Week #%W",legend:"%B Week #%W",connector:"in"},extractUnit:function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=t.getDay()-(r.options.weekStartOnMonday?1:0);return 0>o&&(o=6),t.setDate(t.getDate()-o),t.getTime()}},month:{name:"month",level:50,maxItemNumber:12,defaultColumnNumber:12,defaultRowNumber:1,row:function(){return r.getSubDomainRowNumber()},column:function(){return r.getSubDomainColumnNumber()},position:{x:function(e){return i(e.getMonth()/r._domainType.month.row(e))},y:function(e){return e.getMonth()%r._domainType.month.row(e)}},format:{date:"%B %Y",legend:"%B",connector:"in"},extractUnit:function(e){return new Date(e.getFullYear(),e.getMonth()).getTime()}},year:{name:"year",level:60,row:function(){return r.options.rowLimit||1},column:function(){return r.options.colLimit||1},position:{x:function(){return 1},y:function(){return 1}},format:{date:"%Y",legend:"%Y",connector:"in"},extractUnit:function(e){return new Date(e.getFullYear()).getTime()}}},this._domainType)if(this._domainType.hasOwnProperty(l)){var m=this._domainType[l];this._domainType["x_"+l]={name:"x_"+l,level:m.type,maxItemNumber:m.maxItemNumber,defaultRowNumber:m.defaultRowNumber,defaultColumnNumber:m.defaultColumnNumber,row:m.column,column:m.row,position:{x:m.position.y,y:m.position.x},format:m.format,extractUnit:m.extractUnit}}this.lastInsertedSvg=null,this._completed=!1,this._domains=d3.map(),this.graphDim={width:0,height:0},this.legendDim={width:0,height:0},this.NAVIGATE_LEFT=1,this.NAVIGATE_RIGHT=2,this.RESET_ALL_ON_UPDATE=0,this.RESET_SINGLE_ON_UPDATE=1,this.APPEND_ON_UPDATE=2,this.DEFAULT_LEGEND_MARGIN=10,this.root=null,this.tooltip=null,this._maxDomainReached=!1,this._minDomainReached=!1,this.domainPosition=new DomainPosition,this.Legend=null,this.legendScale=null,this.DSTDomain=[],this._init=function(){return r.getDomain(r.options.start).map(function(e){return e.getTime()}).map(function(e){r._domains.set(e,r.getSubDomain(e).map(function(e){return{t:r._domainType[r.options.subDomain].extractUnit(e),v:null}}))}),r.root=d3.select(r.options.itemSelector).append("svg").attr("class","cal-heatmap-container"),r.root.attr("x",0).attr("y",0).append("svg").attr("class","graph"),r.Legend=new Legend(r),r.options.paintOnLoad&&function(){r.verticalDomainLabel="top"===r.options.label.position||"bottom"===r.options.label.position,r.domainVerticalLabelHeight=null===r.options.label.height?a(25,2*r.options.cellSize):r.options.label.height,r.domainHorizontalLabelWidth=0,""===r.options.domainLabelFormat&&null===r.options.label.height&&(r.domainVerticalLabelHeight=0),r.verticalDomainLabel||(r.domainVerticalLabelHeight=0,r.domainHorizontalLabelWidth=r.options.label.width),r.paint(),!1!==r.options.nextSelector&&d3.select(r.options.nextSelector).on("click."+r.options.itemNamespace,function(){return d3.event.preventDefault(),r.loadNextDomain(1)}),!1!==r.options.previousSelector&&d3.select(r.options.previousSelector).on("click."+r.options.itemNamespace,function(){return d3.event.preventDefault(),r.loadPreviousDomain(1)}),r.Legend.redraw(r.graphDim.width-r.options.domainGutter-r.options.cellPadding),r.afterLoad();var e=r.getDomainKeys();r.options.loadOnInit?r.getDatas(r.options.data,new Date(e[0]),r.getSubDomain(e[e.length-1]).pop(),function(){r.fill(),r.onComplete()}):r.onComplete(),r.checkIfMinDomainIsReached(e[0]),r.checkIfMaxDomainIsReached(r.getNextDomain().getTime())}(),r.root.call(r.tip),r.root.call(r.legendTip),!0},this.paint=function(e){function i(t,o,n,i){var a=0;return!1===e?(a=o[n],o[n]+=i,r.domainPosition.setPosition(t,a),a):e===r.NAVIGATE_RIGHT?(r.domainPosition.setPosition(t,o[n]),s=i,g=r.domainPosition.getPositionFromIndex(1),r.domainPosition.shiftRightBy(g),o[n]):e===r.NAVIGATE_LEFT?(s=-(a=-i),g=o[n]-r.domainPosition.getLast(),r.domainPosition.setPosition(t,a),r.domainPosition.shiftLeftBy(s),a):void 0}var l=r.options;0===arguments.length&&(e=!1);var d=r.root.select(".graph").selectAll(".graph-domain").data(function(){var t=r.getDomainKeys();return e===r.NAVIGATE_LEFT?t.reverse():t},function(e){return e}),s=0,g=0,p=d.enter().append("svg").attr("width",function(e){return t(e,!0)}).attr("height",function(e){return o(e,!0)}).attr("x",function(e){return l.verticalOrientation?(r.graphDim.width=a(r.graphDim.width,t(e,!0)),0):i(e,r.graphDim,"width",t(e,!0))}).attr("y",function(e){return l.verticalOrientation?i(e,r.graphDim,"height",o(e,!0)):(r.graphDim.height=a(r.graphDim.height,o(e,!0)),0)}).attr("class",function(e){var t="graph-domain",o=new Date(e);switch(l.domain){case"hour":t+=" h_"+o.getHours();case"day":t+=" d_"+o.getDate()+" dy_"+o.getDay();case"week":t+=" w_"+r.getWeekNumber(o);case"month":t+=" m_"+(o.getMonth()+1);case"year":t+=" y_"+o.getFullYear()}return t});r.lastInsertedSvg=p,p.append("rect").attr("width",function(e){return t(e,!0)-l.domainGutter-l.cellPadding}).attr("height",function(e){return o(e,!0)-l.domainGutter-l.cellPadding}).attr("class","domain-background");var h=p.append("svg").attr("x",function(){return"left"===l.label.position?r.domainHorizontalLabelWidth+l.domainMargin[3]:l.domainMargin[3]}).attr("y",function(){return"top"===l.label.position?r.domainVerticalLabelHeight+l.domainMargin[0]:l.domainMargin[0]}).attr("class","graph-subdomain-group").selectAll("g").data(function(e){return r._domains.get(e)}).enter().append("g");h.append("rect").attr("class",function(e){return"graph-rect"+r.getHighlightClassName(e.t)+(null===l.onClick?"":" hover_cursor")}).attr("width",l.cellSize).attr("height",l.cellSize).attr("x",function(e){return r.positionSubDomainX(e.t)}).attr("y",function(e){return r.positionSubDomainY(e.t)}).on("click",function(e){if(null!==l.onClick)return r.onClick(new Date(e.t),e.v)}).call(function(e){0<l.cellRadius&&e.attr("rx",l.cellRadius).attr("ry",l.cellRadius),null!==r.legendScale&&null!==l.legendColors&&l.legendColors.hasOwnProperty("base")&&e.attr("fill",l.legendColors.base),l.tooltip&&e.on("mouseover",function(e){r.tip.show(e,this)}).on("mouseout",function(){r.tip.hide(m)})}),l.tooltip||h.append("title").text(function(e){return r.formatDate(new Date(e.t),l.subDomainDateFormat)}),""!==l.domainLabelFormat&&p.append("text").attr("class","graph-label").attr("y",function(e){var t=l.domainMargin[0];switch(l.label.position){case"top":t+=r.domainVerticalLabelHeight/2;break;case"bottom":t+=o(e)+r.domainVerticalLabelHeight/2}return t+l.label.offset.y*("right"===l.label.rotate&&"right"===l.label.position||"left"===l.label.rotate&&"left"===l.label.position?-1:1)}).attr("x",function(e){var o=l.domainMargin[3];switch(l.label.position){case"right":o+=t(e);break;case"bottom":case"top":o+=t(e)/2}return"right"===l.label.align?o+r.domainHorizontalLabelWidth-l.label.offset.x*("right"===l.label.rotate?-1:1):o+l.label.offset.x}).attr("text-anchor",function(){switch(l.label.align){case"start":case"left":return"start";case"end":case"right":return"end";default:return"middle"}}).attr("dominant-baseline",function(){return r.verticalDomainLabel?"middle":"top"}).text(function(e){return r.formatDate(new Date(e),l.domainLabelFormat)}).call(function(e){switch(l.label.rotate){case"right":e.attr("transform",function(e){var o="rotate(90), ";switch(l.label.position){case"right":o+="translate(-"+t(e)+" , -"+t(e)+")";break;case"left":o+="translate(0, -"+r.domainHorizontalLabelWidth+")"}return o});break;case"left":e.attr("transform",function(e){var o="rotate(270), ";switch(l.label.position){case"right":o+="translate(-"+(t(e)+r.domainHorizontalLabelWidth)+" , "+t(e)+")";break;case"left":o+="translate(-"+r.domainHorizontalLabelWidth+" , "+r.domainHorizontalLabelWidth+")"}return o})}}),null!==l.subDomainTextFormat&&h.append("text").attr("class",function(e){return"subdomain-text"+r.getHighlightClassName(e.t)}).attr("x",function(e){return r.positionSubDomainX(e.t)+l.cellSize/2}).attr("y",function(e){return r.positionSubDomainY(e.t)+l.cellSize/2}).attr("text-anchor","middle").attr("dominant-baseline","central").text(function(e){return r.formatDate(new Date(e.t),l.subDomainTextFormat)}),!1!==e&&d.transition().duration(l.animationDuration).attr("x",function(e){return l.verticalOrientation?0:r.domainPosition.getPosition(e)}).attr("y",function(e){return l.verticalOrientation?r.domainPosition.getPosition(e):0});var c=r.graphDim.width,D=r.graphDim.height;l.verticalOrientation?r.graphDim.height+=s-g:r.graphDim.width+=s-g,d.exit().transition().duration(l.animationDuration).attr("x",function(o){return l.verticalOrientation?0:e===r.NAVIGATE_LEFT?n(r.graphDim.width,c):e===r.NAVIGATE_RIGHT?-t(o,!0):void 0}).attr("y",function(t){if(!l.verticalOrientation)return 0;switch(e){case r.NAVIGATE_LEFT:return n(r.graphDim.height,D);case r.NAVIGATE_RIGHT:return-o(t,!0)}}).remove(),r.resize()}});CalHeatMap.prototype={init:function(e){function t(e,t,o){if((t&&!1===e||e instanceof Element||"string"==typeof e)&&""!==e)return!0;throw new Error("The "+o+" is not valid")}function o(e){switch("number"==typeof e&&(e=[e]),Array.isArray(e)||(console.log("Margin only takes an integer or an array of integers"),e=[0]),e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return e.slice(0,4)}}var n=this,i=n.options=function mergeRecursive(t,o){for(var n in o)try{t[n]=o[n].constructor===Object?mergeRecursive(t[n],o[n]):o[n]}catch(i){t[n]=o[n]}return t}(n.options,e);if(function(){if(!n._domainType.hasOwnProperty(i.domain)||"min"===i.domain||"x_"===i.domain.substring(0,2))throw new Error("The domain '"+i.domain+"' is not valid");if(!n._domainType.hasOwnProperty(i.subDomain)||"year"===i.subDomain)throw new Error("The subDomain '"+i.subDomain+"' is not valid");if(n._domainType[i.domain].level<=n._domainType[i.subDomain].level)throw new Error("'"+i.subDomain+"' is not a valid subDomain to '"+i.domain+"'")}(),t(i.itemSelector,!1,"itemSelector"),-1===n.allowedDataType.indexOf(i.dataType))throw new Error("The data type '"+i.dataType+"' is not valid data type");if(null===d3.select(i.itemSelector)[0][0])throw new Error("The node '"+i.itemSelector+"' specified in itemSelector does not exists");try{t(i.nextSelector,!0,"nextSelector"),t(i.previousSelector,!0,"previousSelector")}catch(e){return console.log(e.message),!1}e.hasOwnProperty("subDomain")||(this.options.subDomain=function(e){return"year"===e?"month":"month"===e?"day":"week"===e?"day":"day"===e?"hour":"min"}(e.domain)),("string"!=typeof i.itemNamespace||""===i.itemNamespace)&&(console.log("itemNamespace can not be empty, falling back to cal-heatmap"),i.itemNamespace="cal-heatmap");var a=["data","onComplete","onClick","afterLoad","afterLoadData","afterLoadPreviousDomain","afterLoadNextDomain","afterUpdate"];for(var r in a)e.hasOwnProperty(a[r])&&(i[a[r]]=e[a[r]]);return i.subDomainDateFormat="string"==typeof i.subDomainDateFormat||"function"==typeof i.subDomainDateFormat?i.subDomainDateFormat:this._domainType[i.subDomain].format.date,i.domainLabelFormat="string"==typeof i.domainLabelFormat||"function"==typeof i.domainLabelFormat?i.domainLabelFormat:this._domainType[i.domain].format.legend,i.subDomainTextFormat="string"==typeof i.subDomainTextFormat&&""!==i.subDomainTextFormat||"function"==typeof i.subDomainTextFormat?i.subDomainTextFormat:null,i.domainMargin=o(i.domainMargin),i.legendMargin=o(i.legendMargin),i.highlight=n.expandDateSetting(i.highlight),i.itemName=function(e){return"string"==typeof e?[e,e+(""===e?"":"s")]:Array.isArray(e)?1===e.length?[e[0],e[0]+"s"]:2<e.length?e.slice(0,2):e:["item","items"]}(i.itemName),i.colLimit=function(e){return 0<e?e:null}(i.colLimit),i.rowLimit=function(e){return 0<e&&0<i.colLimit?(console.log("colLimit and rowLimit are mutually exclusive, rowLimit will be ignored"),null):0<e?e:null}(i.rowLimit),e.hasOwnProperty("legendMargin")||function(){switch(i.legendVerticalPosition){case"top":i.legendMargin[2]=n.DEFAULT_LEGEND_MARGIN;break;case"bottom":i.legendMargin[0]=n.DEFAULT_LEGEND_MARGIN;break;case"middle":case"center":i.legendMargin["right"===i.legendHorizontalPosition?3:1]=n.DEFAULT_LEGEND_MARGIN}}(),function(){if(!e.hasOwnProperty("label")||e.hasOwnProperty("label")&&!e.label.hasOwnProperty("align")){switch(i.label.position){case"left":i.label.align="right";break;case"right":i.label.align="left";break;default:i.label.align="center"}"left"===i.label.rotate?i.label.align="right":"right"===i.label.rotate&&(i.label.align="left")}e.hasOwnProperty("label")&&(!e.hasOwnProperty("label")||e.label.hasOwnProperty("offset"))||"left"!==i.label.position&&"right"!==i.label.position||(i.label.offset={x:10,y:15})}(),this._init()},expandDateSetting:function(e){return Array.isArray(e)||(e=[e]),e.map(function(e){return"now"===e?new Date:!!(e instanceof Date)&&e}).filter(function(e){return!1!==e})},fill:function(e){var t=this,o=t.options;0===arguments.length&&(e=t.root.selectAll(".graph-domain"));var n=e.selectAll("svg").selectAll("g").data(function(e){return t._domains.get(e)});n.transition().duration(o.animationDuration).select("rect").attr("class",function(e){var n=t.getHighlightClassName(e.t).trim().split(" "),i=t.dateIsLessThan(e.t,new Date),a=t.dateIsEqual(e.t,new Date);return null!==t.legendScale&&(null!==e.v||!o.hasOwnProperty("considerMissingDataAsZero")||o.considerMissingDataAsZero||o.legendColors.hasOwnProperty("base"))||n.push("graph-rect"),a?n.push("now"):!i&&n.push("future"),null===e.v?o.considerMissingDataAsZero&&i&&n.push(t.Legend.getClass(0,null===t.legendScale)):n.push(t.Legend.getClass(e.v,null===t.legendScale)),null!==o.onClick&&n.push("hover_cursor"),n.join(" ")}).call(function(e){return null!==t.legendScale&&void e.attr("fill",function(e){return null===e.v&&o.hasOwnProperty("considerMissingDataAsZero")&&!o.considerMissingDataAsZero&&o.legendColors.hasOwnProperty("base")?o.legendColors.base:null!==o.legendColors&&o.legendColors.hasOwnProperty("empty")&&(0===e.v||null===e.v&&o.hasOwnProperty("considerMissingDataAsZero")&&o.considerMissingDataAsZero)?o.legendColors.empty:0>e.v&&0<o.legend[0]&&null!==o.legendColors&&o.legendColors.hasOwnProperty("overflow")?o.legendColors.overflow:t.legendScale(Math.min(e.v,o.legend[o.legend.length-1]))})}),n.transition().duration(o.animationDuration).select("title").text(function(e){return t.getSubDomainTitle(e)}),n.transition().duration(o.animationDuration).select("text").attr("class",function(e){return"subdomain-text"+t.getHighlightClassName(e.t)}).call(function(e){"function"==typeof o.subDomainTextFormat&&e.text(function(e){return o.subDomainTextFormat(e.t,e.v)})})},formatStringWithObject:function(e,t){for(var o in t)if(t.hasOwnProperty(o)){var n=new RegExp("\\{"+o+"\\}","gi");e=e.replace(n,t[o])}return e},triggerEvent:function(e,t,o){return!!(3===arguments.length&&o||null===this.options[e])||("function"==typeof this.options[e]?("function"==typeof t&&(t=t()),this.options[e].apply(this,t)):(console.log("Provided callback for "+e+" is not a function."),!1))},onClick:function(e,t){return this.triggerEvent("onClick",[e,t])},afterLoad:function(){return this.triggerEvent("afterLoad")},onComplete:function(){var e=this.triggerEvent("onComplete",[],this._completed);return this._completed=!0,e},afterLoadPreviousDomain:function(e){var t=this;return this.triggerEvent("afterLoadPreviousDomain",function(){var o=t.getSubDomain(e);return[o.shift(),o.pop()]})},afterLoadNextDomain:function(e){var t=this;return this.triggerEvent("afterLoadNextDomain",function(){var o=t.getSubDomain(e);return[o.shift(),o.pop()]})},onMinDomainReached:function(e){return this._minDomainReached=e,this.triggerEvent("onMinDomainReached",[e])},onMaxDomainReached:function(e){return this._maxDomainReached=e,this.triggerEvent("onMaxDomainReached",[e])},checkIfMinDomainIsReached:function(e,t){this.minDomainIsReached(e)&&this.onMinDomainReached(!0),2===arguments.length&&this._maxDomainReached&&!this.maxDomainIsReached(t)&&this.onMaxDomainReached(!1)},checkIfMaxDomainIsReached:function(e,t){this.maxDomainIsReached(e)&&this.onMaxDomainReached(!0),2===arguments.length&&this._minDomainReached&&!this.minDomainIsReached(t)&&this.onMinDomainReached(!1)},afterUpdate:function(){return this.triggerEvent("afterUpdate")},formatNumber:d3.format(",g"),formatDate:function(e,t){return 2>arguments.length&&(t="title"),"function"==typeof t?t(e):d3.time.format(t)(e)},getSubDomainTitle:function(e){if(null===e.v&&!this.options.considerMissingDataAsZero)return this.formatStringWithObject(this.options.subDomainTitleFormat.empty,{date:this.formatDate(new Date(e.t),this.options.subDomainDateFormat)});var t=e.v;return null===t&&this.options.considerMissingDataAsZero&&(t=0),this.formatStringWithObject(this.options.subDomainTitleFormat.filled,{count:this.formatNumber(t),name:this.options.itemName[1===t?0:1],connector:this._domainType[this.options.subDomain].format.connector,date:this.formatDate(new Date(e.t),this.options.subDomainDateFormat)})},loadNextDomain:function(e){if(this._maxDomainReached||0===e)return!1;var t=this.loadNewDomains(this.NAVIGATE_RIGHT,this.getDomain(this.getNextDomain(),e));return this.afterLoadNextDomain(t.end),this.checkIfMaxDomainIsReached(this.getNextDomain().getTime(),t.start),!0},loadPreviousDomain:function(e){if(this._minDomainReached||0===e)return!1;var t=this.loadNewDomains(this.NAVIGATE_LEFT,this.getDomain(this.getDomainKeys()[0],-e).reverse());return this.afterLoadPreviousDomain(t.start),this.checkIfMinDomainIsReached(t.start,t.end),!0},loadNewDomains:function(e,t){function o(e){return{t:n._domainType[n.options.subDomain].extractUnit(e),v:null}}for(var n=this,a=e===this.NAVIGATE_LEFT,r=-1,l=t.length,d=this.getDomainKeys();++r<l;){if(a&&this.minDomainIsReached(t[r])){t=t.slice(0,r+1);break}if(!a&&this.maxDomainIsReached(t[r])){t=t.slice(0,r);break}}for(r=0,l=(t=t.slice(-this.options.range)).length;r<l;r++)this._domains.set(t[r].getTime(),this.getSubDomain(t[r]).map(o)),this._domains.remove(a?d.pop():d.shift());return d=this.getDomainKeys(),a&&(t=t.reverse()),this.paint(e),this.getDatas(this.options.data,t[0],this.getSubDomain(t[t.length-1]).pop(),function(){n.fill(n.lastInsertedSvg)}),{start:t[a?0:1],end:d[d.length-1]}},maxDomainIsReached:function(e){return null!==this.options.maxDate&&this.options.maxDate.getTime()<e},minDomainIsReached:function(e){return null!==this.options.minDate&&this.options.minDate.getTime()>=e},getDomainKeys:function(){return this._domains.keys().map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t})},positionSubDomainX:function(e){var t=this._domainType[this.options.subDomain].position.x(new Date(e));return t*this.options.cellSize+t*this.options.cellPadding},positionSubDomainY:function(e){var t=this._domainType[this.options.subDomain].position.y(new Date(e));return t*this.options.cellSize+t*this.options.cellPadding},getSubDomainColumnNumber:function(e){var t=Math.ceil;if(0<this.options.rowLimit){var o=this._domainType[this.options.subDomain].maxItemNumber;return"function"==typeof o&&(o=o(e)),t(o/this.options.rowLimit)}var n=this._domainType[this.options.subDomain].defaultColumnNumber;return"function"==typeof n&&(n=n(e)),this.options.colLimit||n},getSubDomainRowNumber:function(e){var t=Math.ceil;if(0<this.options.colLimit){var o=this._domainType[this.options.subDomain].maxItemNumber;return"function"==typeof o&&(o=o(e)),t(o/this.options.colLimit)}var n=this._domainType[this.options.subDomain].defaultRowNumber;return"function"==typeof n&&(n=n(e)),this.options.rowLimit||n},getHighlightClassName:function(e){if(e=new Date(e),0<this.options.highlight.length)for(var t in this.options.highlight)if(this.dateIsEqual(this.options.highlight[t],e))return this.isNow(this.options.highlight[t])?" highlight-now":" highlight";return""},isNow:function(e){return this.dateIsEqual(e,new Date)},dateIsEqual:function(e,t){switch(e instanceof Date||(e=new Date(e)),t instanceof Date||(t=new Date(t)),this.options.subDomain){case"x_min":case"min":return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes();case"x_hour":case"hour":return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()&&e.getHours()===t.getHours();case"x_day":case"day":return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate();case"x_week":case"week":return e.getFullYear()===t.getFullYear()&&this.getWeekNumber(e)===this.getWeekNumber(t);case"x_month":case"month":return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth();default:return!1}},dateIsLessThan:function(e,t){function o(e,t){return"x_min"===t||"min"===t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()).getTime():"x_hour"===t||"hour"===t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()).getTime():"x_day"===t||"day"===t?new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime():"x_week"===t||"week"===t||"x_month"===t||"month"===t?new Date(e.getFullYear(),e.getMonth()).getTime():e.getTime()}return e instanceof Date||(e=new Date(e)),t instanceof Date||(t=new Date(t)),o(e,this.options.subDomain)<o(t,this.options.subDomain)},getDayOfYear:d3.time.format("%j"),getWeekNumber:function(e){return(!0===this.options.weekStartOnMonday?d3.time.format("%W"):d3.time.format("%U"))(e)},getMonthWeekNumber:function(e){"number"==typeof e&&(e=new Date(e));var t=this.getWeekNumber(new Date(e.getFullYear(),e.getMonth()));return this.getWeekNumber(e)-t-1},getWeekNumberInYear:function(e){"number"==typeof e&&(e=new Date(e))},getDayCountInMonth:function(e){return this.getEndOfMonth(e).getDate()},getDayCountInYear:function(e){return"number"==typeof e&&(e=new Date(e)),1===new Date(e.getFullYear(),1,29).getMonth()?366:365},getWeekDay:function(e){return!1===this.options.weekStartOnMonday?e.getDay():0===e.getDay()?6:e.getDay()-1},getEndOfMonth:function(e){return"number"==typeof e&&(e=new Date(e)),new Date(e.getFullYear(),e.getMonth()+1,0)},jumpDate:function(e,t,o){var n=new Date(e);return"hour"===o?n.setHours(n.getHours()+t):"day"===o?n.setHours(n.getHours()+24*t):"week"===o?n.setHours(n.getHours()+24*t*7):"month"===o?n.setMonth(n.getMonth()+t):"year"===o&&n.setFullYear(n.getFullYear()+t),new Date(n)},getMinuteDomain:function(e,t){var a,o=Math.min,n=Math.max,i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());return a=t instanceof Date?new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()):new Date(+i+1e3*t*60),d3.time.minutes(o(i,a),n(i,a))},getHourDomain:function(e,t){var o=Math.abs,n=Math.min,a=Math.max,r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()),l=null;t instanceof Date?l=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()):(l=new Date(r)).setHours(l.getHours()+t);var d=d3.time.hours(n(r,l),a(r,l)),m=0,s=d.length;for(m=0;m<s;m++)if(0<m&&d[m].getHours()===d[m-1].getHours()){this.DSTDomain.push(d[m].getTime()),d.splice(m,1);break}return"number"==typeof t&&d.length>o(t)&&d.splice(d.length-1,1),d},getDayDomain:function(e,t){var o=Math.min,n=Math.max,i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),a=null;return t instanceof Date?a=new Date(t.getFullYear(),t.getMonth(),t.getDate()):(a=new Date(i),a=new Date(a.setDate(a.getDate()+parseInt(t,10)))),d3.time.days(o(i,a),n(i,a))},getWeekDomain:function(e,t){var i,o=Math.min,n=Math.max;!1===this.options.weekStartOnMonday?i=new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay()):1===e.getDay()?i=new Date(e.getFullYear(),e.getMonth(),e.getDate()):0===e.getDay()?(i=new Date(e.getFullYear(),e.getMonth(),e.getDate())).setDate(i.getDate()-6):i=new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay()+1);var a=new Date(i),r=t;return"object"!=typeof t&&(r=new Date(a.setDate(a.getDate()+7*t))),!0===this.options.weekStartOnMonday?d3.time.mondays(o(i,r),n(i,r)):d3.time.sundays(o(i,r),n(i,r))},getMonthDomain:function(e,t){var o=Math.min,n=Math.max,i=new Date(e.getFullYear(),e.getMonth()),a=null;return t instanceof Date?a=new Date(t.getFullYear(),t.getMonth()):a=(a=new Date(i)).setMonth(a.getMonth()+t),d3.time.months(o(i,a),n(i,a))},getYearDomain:function(e,t){var a,o=Math.min,n=Math.max,i=new Date(e.getFullYear(),0);return a=t instanceof Date?new Date(t.getFullYear(),0):new Date(e.getFullYear()+t,0),d3.time.years(o(i,a),n(i,a))},getDomain:function(e,t){switch("number"==typeof e&&(e=new Date(e)),2>arguments.length&&(t=this.options.range),this.options.domain){case"hour":var o=this.getHourDomain(e,t);return"number"==typeof t&&o.length<t&&(0<t?o.push(this.getHourDomain(o[o.length-1],2)[1]):o.shift(this.getHourDomain(o[0],-2)[0])),o;case"day":return this.getDayDomain(e,t);case"week":return this.getWeekDomain(e,t);case"month":return this.getMonthDomain(e,t);case"year":return this.getYearDomain(e,t)}},getSubDomain:function(e){"number"==typeof e&&(e=new Date(e));var t=this;switch(this.options.subDomain){case"x_min":case"min":return this.getMinuteDomain(e,function(e,t){return"hour"===t?60:"day"===t?1440:"week"===t?10080:void 0}(0,this.options.domain));case"x_hour":case"hour":return this.getHourDomain(e,function(e,o){return"day"===o?24:"week"===o?168:"month"===o?24*t.getDayCountInMonth(e):void 0}(e,this.options.domain));case"x_day":case"day":return this.getDayDomain(e,function(e,o){return"year"===o?t.getDayCountInYear(e):"month"===o?t.getDayCountInMonth(e):"week"===o?7:void 0}(e,this.options.domain));case"x_week":case"week":return this.getWeekDomain(e,function(e,o){if("month"===o){var n=new Date(e.getFullYear(),e.getMonth()+1,0),i=t.getWeekNumber(n),a=t.getWeekNumber(new Date(e.getFullYear(),e.getMonth()));return a>i&&(a=0,i++),i-a+1}return"year"===o?t.getWeekNumber(new Date(e.getFullYear(),11,31)):void 0}(e,this.options.domain));case"x_month":case"month":return this.getMonthDomain(e,12)}},getNextDomain:function(e){return 0===arguments.length&&(e=1),this.getDomain(this.jumpDate(this.getDomainKeys().pop(),e,this.options.domain),1)[0]},getPreviousDomain:function(e){return 0===arguments.length&&(e=1),this.getDomain(this.jumpDate(this.getDomainKeys().shift(),-e,this.options.domain),1)[0]},getDatas:function(e,t,o,n,i,a){var r=this;5>arguments.length&&(i=!0),6>arguments.length&&(a=this.APPEND_ON_UPDATE);var l=function(e,l){!1===i?("csv"===r.options.dataType||"tsv"===r.options.dataType)&&(l=this.interpretCSV(l)):"function"==typeof i?l=i(l):"function"==typeof r.options.afterLoadData?l=r.options.afterLoadData(l):console.log("Provided callback for afterLoadData is not a function."),r.parseDatas(l,a,t,o),"function"==typeof n&&n()};switch(typeof e){case"string":if(""===e)return l(0,{}),!0;var d=this.parseURI(e,t,o),m="GET";null!==r.options.dataPostPayload&&(m="POST");var s=null;null!==r.options.dataPostPayload&&(s=this.parseURI(r.options.dataPostPayload,t,o));var g=null;switch(this.options.dataType){case"json":g=d3.json(d);break;case"csv":g=d3.csv(d);break;case"tsv":g=d3.tsv(d);break;case"txt":g=d3.text(d,"text/plain")}if(null!==r.options.dataRequestHeaders)for(var p in r.options.dataRequestHeaders)r.options.dataRequestHeaders.hasOwnProperty(p)&&g.header(p,r.options.dataRequestHeaders[p]);return g.send(m,s,l),!1;case"object":if(e===Object(e))return l(0,e),!1;default:return l(0,{}),!0}},parseDatas:function(e,t,o,n){t===this.RESET_ALL_ON_UPDATE&&this._domains.forEach(function(e,t){t.forEach(function(e,t,o){o[t].v=null})});var i={},a=function(e){return e.t};for(var r in e){var l=new Date(1e3*r),d=this.getDomain(l)[0].getTime();if(0<=this.DSTDomain.indexOf(d)&&this._domains.has(d-36e5)&&(d-=36e5),!isNaN(r)&&e.hasOwnProperty(r)&&this._domains.has(d)&&d>=+o&&d<+n){var m=this._domains.get(d);i.hasOwnProperty(d)||(i[d]=m.map(a));var s=i[d].indexOf(this._domainType[this.options.subDomain].extractUnit(l));t===this.RESET_SINGLE_ON_UPDATE?m[s].v=e[r]:isNaN(m[s].v)?m[s].v=e[r]:m[s].v+=e[r]}}},parseURI:function(e,t,o){return e=(e=(e=(e=e.replace(/\{\{t:start\}\}/g,t.getTime()/1e3)).replace(/\{\{t:end\}\}/g,o.getTime()/1e3)).replace(/\{\{d:start\}\}/g,t.toISOString())).replace(/\{\{d:end\}\}/g,o.toISOString())},interpretCSV:function(e){var t,o,n={},a=Object.keys(e[0]);for(t=0,o=e.length;t<o;t++)n[e[t][a[0]]]=+e[t][a[1]];return n},resize:function(){var e=Math.max,t=this,o=t.options,n=o.displayLegend?t.Legend.getDim("width")+o.legendMargin[1]+o.legendMargin[3]:0,i=o.displayLegend?t.Legend.getDim("height")+o.legendMargin[0]+o.legendMargin[2]:0,a=t.graphDim.width-o.domainGutter-o.cellPadding,r=t.graphDim.height-o.domainGutter-o.cellPadding;this.root.transition().duration(o.animationDuration).attr("width",function(){return"middle"===o.legendVerticalPosition||"center"===o.legendVerticalPosition?a+n:e(a,n)}).attr("height",function(){return"middle"===o.legendVerticalPosition||"center"===o.legendVerticalPosition?e(r,i):r+i}),this.root.select(".graph").transition().duration(o.animationDuration).attr("y",function(){return"top"===o.legendVerticalPosition?i:0}).attr("x",function(){return"middle"!==o.legendVerticalPosition&&"center"!==o.legendVerticalPosition||"left"!==o.legendHorizontalPosition?0:n})},next:function(e){return 0===arguments.length&&(e=1),this.loadNextDomain(e)},previous:function(e){return 0===arguments.length&&(e=1),this.loadPreviousDomain(e)},jumpTo:function(e,t){2>arguments.length&&(t=!1);var o=this.getDomainKeys(),n=o[0],i=o[o.length-1];return e<n?this.loadPreviousDomain(this.getDomain(n,e).length):t?this.loadNextDomain(this.getDomain(n,e).length):!!(e>i)&&this.loadNextDomain(this.getDomain(i,e).length)},rewind:function(){this.jumpTo(this.options.start,!0)},update:function(e,t,o){0===arguments.length&&(e=this.options.data),2>arguments.length&&(t=!0),3>arguments.length&&(o=this.RESET_ALL_ON_UPDATE);var n=this.getDomainKeys(),i=this;this.getDatas(e,new Date(n[0]),this.getSubDomain(n[n.length-1]).pop(),function(){i.fill(),i.afterUpdate()},t,o)},setLegend:function(){var e=this.options.legend.slice(0);1<=arguments.length&&Array.isArray(arguments[0])&&(this.options.legend=arguments[0]),2<=arguments.length&&(Array.isArray(arguments[1])&&2<=arguments[1].length?this.options.legendColors=[arguments[1][0],arguments[1][1]]:this.options.legendColors=arguments[1]),(0<arguments.length&&!function arrayEquals(e,t){if(!t||!e)return!1;if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]instanceof Array&&t[o]instanceof Array){if(!arrayEquals(e[o],t[o]))return!1}else if(e[o]!==t[o])return!1;return!0}(e,this.options.legend)||2<=arguments.length)&&(this.Legend.buildColors(),this.fill()),this.Legend.redraw(this.graphDim.width-this.options.domainGutter-this.options.cellPadding)},removeLegend:function(){return!!this.options.displayLegend&&(this.options.displayLegend=!1,this.Legend.remove(),!0)},showLegend:function(){return!this.options.displayLegend&&(this.options.displayLegend=!0,this.Legend.redraw(this.graphDim.width-this.options.domainGutter-this.options.cellPadding),!0)},highlight:function(e){return!!(0<(this.options.highlight=this.expandDateSetting(e)).length)&&(this.fill(),!0)},destroy:function(e){return this.root.transition().duration(this.options.animationDuration).attr("width",0).attr("height",0).remove().each("end",function(){"function"==typeof e?e():void 0!==e&&console.log("Provided callback for destroy() is not a function.")}),null},getSVG:function(){for(var e={".cal-heatmap-container":{},".graph":{},".graph-rect":{},"rect.highlight":{},"rect.now":{},"rect.highlight-now":{},"text.highlight":{},"text.now":{},"text.highlight-now":{},".domain-background":{},".graph-label":{},".subdomain-text":{},".q0":{},".qi":{}},t=1,o=this.options.legend.length+1;t<=o;t++)e[".q"+t]={};var n=this.root,a=["stroke","stroke-width","stroke-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-miterlimit","fill","fill-opacity","fill-rule","marker","marker-start","marker-mid","marker-end","alignement-baseline","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","kerning","text-anchor","shape-rendering","text-transform","font-family","font","font-size","font-weight"],r=function(t,o,n){-1!==a.indexOf(o)&&(e[t][o]=n)},d=function(t){return n.select(t)[0][0]};for(var m in e)if(e.hasOwnProperty(m)){var s=d(m);if(null!==s)if("getComputedStyle"in window){var g=getComputedStyle(s,null);if(0!==g.length)for(var u=0;u<g.length;u++)r(m,g.item(u),g.getPropertyValue(g.item(u)));else for(var h in g)g.hasOwnProperty(h)&&r(m,h,g[h])}else if("currentStyle"in s){var c=s.currentStyle;for(var D in c)r(m,D,c[D])}}var p='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css"><![CDATA[ ';for(var f in e){for(var y in p+=f+" {\n",e[f])p+="\t"+y+":"+e[f][y]+";\n";p+="}\n"}return p+="]]></style>",p+=(new XMLSerializer).serializeToString(this.root[0][0]),p+="</svg>"}};var DomainPosition=function(){this.positions=d3.map()};DomainPosition.prototype.getPosition=function(e){return this.positions.get(e)},DomainPosition.prototype.getPositionFromIndex=function(e){var t=this.getKeys();return this.positions.get(t[e])},DomainPosition.prototype.getLast=function(){var e=this.getKeys();return this.positions.get(e[e.length-1])},DomainPosition.prototype.setPosition=function(e,t){this.positions.set(e,t)},DomainPosition.prototype.shiftRightBy=function(e){this.positions.forEach(function(t,o){this.set(t,o-e)});var t=this.getKeys();this.positions.remove(t[0])},DomainPosition.prototype.shiftLeftBy=function(e){this.positions.forEach(function(t,o){this.set(t,o+e)});var t=this.getKeys();this.positions.remove(t[t.length-1])},DomainPosition.prototype.getKeys=function(){return this.positions.keys().sort(function(e,t){return parseInt(e,10)-parseInt(t,10)})};var Legend=function(e){this.calendar=e,this.computeDim(),null!==e.options.legendColors&&this.buildColors()};Legend.prototype.computeDim=function(){var e=this.calendar.options;this.dim={width:e.legendCellSize*(e.legend.length+1)+e.legendCellPadding*e.legend.length,height:e.legendCellSize}},Legend.prototype.remove=function(){this.calendar.root.select(".graph-legend").remove(),this.calendar.resize()},Legend.prototype.redraw=function(e){function t(e){e.attr("width",m.legendCellSize).attr("height",m.legendCellSize).attr("rx",m.legendCellRadius).attr("ry",m.legendCellRadius).attr("x",function(e,t){return t*(m.legendCellSize+m.legendCellPadding)})}function o(){switch(m.legendHorizontalPosition){case"right":return"center"===m.legendVerticalPosition||"middle"===m.legendVerticalPosition?e+m.legendMargin[3]:e-a.getDim("width")-m.legendMargin[1];case"middle":case"center":return Math.round(e/2-a.getDim("width")/2);default:return m.legendMargin[3]}}function n(){return"bottom"===m.legendVerticalPosition?r.graphDim.height+m.legendMargin[0]-m.domainGutter-m.cellPadding:m.legendMargin[0]}if(!this.calendar.options.displayLegend)return!1;var i,a=this,r=this.calendar,l=r.root,m=r.options;this.computeDim();var s=m.legend.slice(0);s.push(s[s.length-1]+1);var g=r.root.select(".graph-legend");null===g[0][0]?((l="top"===m.legendVerticalPosition?l.insert("svg",".graph"):l.append("svg")).attr("x",o()).attr("y",n()),i=l.attr("class","graph-legend").attr("height",a.getDim("height")).attr("width",a.getDim("width")).append("g").selectAll().data(s)):i=(l=g).select("g").selectAll("rect").data(s),i.enter().append("rect").call(t).attr("class",function(e){return r.Legend.getClass(e,null===r.legendScale)}).attr("fill-opacity",0).call(function(e){null!==r.legendScale&&null!==m.legendColors&&m.legendColors.hasOwnProperty("base")&&e.attr("fill",m.legendColors.base)}).append("title"),i.exit().transition().duration(m.animationDuration).attr("fill-opacity",0).remove(),i.transition().delay(function(e,t){return m.animationDuration*t/10}).call(t).attr("fill-opacity",1).call(function(e){e.attr("fill",function(e,t){return null===r.legendScale?"":0===t?r.legendScale(e-1):r.legendScale(m.legend[t-1])}),e.attr("class",function(e){return r.Legend.getClass(e,null===r.legendScale)})}),i.select("title").text(function(e,t){return 0===t?r.formatStringWithObject(m.legendTitleFormat.lower,{min:m.legend[t],name:m.itemName[1]}):t===s.length-1?r.formatStringWithObject(m.legendTitleFormat.upper,{max:m.legend[t-1],name:m.itemName[1]}):r.formatStringWithObject(m.legendTitleFormat.inner,{down:m.legend[t-1],up:m.legend[t],name:m.itemName[1]})}),i.on("mouseover",function(e){r.legendTip.show(e,this)}).on("mouseout",function(){r.legendTip.hide()}),l.transition().duration(m.animationDuration).attr("x",o()).attr("y",n()).attr("width",a.getDim("width")).attr("height",a.getDim("height")),l.select("g").transition().duration(m.animationDuration).attr("transform",function(){return"vertical"===m.legendOrientation?"rotate(90 "+m.legendCellSize/2+" "+m.legendCellSize/2+")":""}),r.resize()},Legend.prototype.getDim=function(e){var t="horizontal"===this.calendar.options.legendOrientation;return"width"===e?this.dim[t?"width":"height"]:"height"===e?this.dim[t?"height":"width"]:void 0},Legend.prototype.buildColors=function(){var e=this.calendar.options;if(null===e.legendColors)return this.calendar.legendScale=null,!1;var t=[];if(Array.isArray(e.legendColors))t=e.legendColors;else{if(!e.legendColors.hasOwnProperty("min")||!e.legendColors.hasOwnProperty("max"))return e.legendColors=null,!1;t=[e.legendColors.min,e.legendColors.max]}var o=e.legend.slice(0);0<o[0]?o.unshift(0):0>=o[0]&&o.unshift(o[0]-(o[o.length-1]-o[0])/o.length);var n=e.legendColors.hasOwnProperty("colorScale")?e.legendColors.colorScale:d3.scale.linear().range(t).interpolate(d3.interpolateHcl).domain([d3.min(o),d3.max(o)]),i=o.map(function(e){return n(e)});return this.calendar.legendScale=d3.scale.threshold().domain(e.legend).range(i),!0},Legend.prototype.getClass=function(e,t){if(null===e||isNaN(e))return"";for(var o=[this.calendar.options.legend.length+1],n=0,a=this.calendar.options.legend.length-1;n<=a;n++){if(0<this.calendar.options.legend[0]&&0>e){o=["1","i"];break}if(e<=this.calendar.options.legend[n]){o=[n+1];break}}return 0===e&&o.push(0),o.unshift(""),(o.join(" r")+(t?o.join(" q"):"")).trim()};var _default=CalHeatMap;exports.default=_default},776:function(module,exports,__webpack_require__){var content=__webpack_require__(777);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(131)(content,options);content.locals&&(module.exports=content.locals)},777:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(130)(!1)).push([module.i,'/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* from d3-tip */\n.d3-tip {\n  line-height: 1;\n  padding: 12px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  border-radius: 2px;\n  pointer-events: none;\n  z-index: 1000;\n}\n\n/* Creates a small triangle extender for the tooltip */\n.d3-tip:after {\n  box-sizing: border-box;\n  display: inline;\n  font-size: 10px;\n  width: 100%;\n  line-height: 1;\n  color: rgba(0, 0, 0, 0.8);\n  position: absolute;\n  pointer-events: none;\n}\n\n/* Northward tooltips */\n.d3-tip.n:after {\n  content: "\\25BC";\n  margin: -1px 0 0 0;\n  top: 100%;\n  left: 0;\n  text-align: center;\n}\n\n/* Eastward tooltips */\n.d3-tip.e:after {\n  content: "\\25C0";\n  margin: -4px 0 0 0;\n  top: 50%;\n  left: -8px;\n}\n\n/* Southward tooltips */\n.d3-tip.s:after {\n  content: "\\25B2";\n  margin: 0 0 1px 0;\n  top: -8px;\n  left: 0;\n  text-align: center;\n}\n\n/* Westward tooltips */\n.d3-tip.w:after {\n  content: "\\25B6";\n  margin: -4px 0 0 -1px;\n  top: 50%;\n  left: 100%;\n}\n',""])},778:function(module,exports,__webpack_require__){var content=__webpack_require__(779);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(131)(content,options);content.locals&&(module.exports=content.locals)},779:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(130)(!1)).push([module.i,'/* [LICENSE TBD] */\n/* Cal-HeatMap CSS */\n\n.cal-heatmap-container {\n  display: block;\n}\n\n.cal-heatmap-container .graph-label\n{\n  fill: #999;\n  font-size: 10px\n}\n\n.cal-heatmap-container .graph, .cal-heatmap-container .graph-legend rect {\n  shape-rendering: crispedges\n}\n\n.cal-heatmap-container .graph-rect\n{\n  fill: #ededed\n}\n\n.cal-heatmap-container .graph-subdomain-group rect:hover\n{\n  stroke: #000;\n  stroke-width: 1px\n}\n\n.cal-heatmap-container .subdomain-text {\n  font-size: 8px;\n  fill: #999;\n  pointer-events: none\n}\n\n.cal-heatmap-container .hover_cursor:hover {\n  cursor: pointer\n}\n\n.cal-heatmap-container .qi {\n  background-color: #999;\n  fill: #999\n}\n\n/*\nRemove comment to apply this style to date with value equal to 0\n.q0\n{\n  background-color: #fff;\n  fill: #fff;\n  stroke: #ededed\n}\n*/\n\n.cal-heatmap-container .q1\n{\n  background-color: #dae289;\n  fill: #dae289\n}\n\n.cal-heatmap-container .q2\n{\n  background-color: #cedb9c;\n  fill: #9cc069\n}\n\n.cal-heatmap-container .q3\n{\n  background-color: #b5cf6b;\n  fill: #669d45\n}\n\n.cal-heatmap-container .q4\n{\n  background-color: #637939;\n  fill: #637939\n}\n\n.cal-heatmap-container .q5\n{\n  background-color: #3b6427;\n  fill: #3b6427\n}\n\n.cal-heatmap-container rect.highlight\n{\n  stroke:#444;\n  stroke-width:1\n}\n\n.cal-heatmap-container text.highlight\n{\n  fill: #444\n}\n\n.cal-heatmap-container rect.highlight-now\n{\n  stroke: red\n}\n\n.cal-heatmap-container text.highlight-now\n{\n  fill: red;\n  font-weight: 800\n}\n\n.cal-heatmap-container .domain-background {\n  fill: none;\n  shape-rendering: crispedges\n}\n\n.ch-tooltip {\n  padding: 10px;\n  background: #222;\n  color: #bbb;\n  font-size: 12px;\n  line-height: 1.4;\n  width: 140px;\n  position: absolute;\n  z-index: 99999;\n  text-align: center;\n  border-radius: 2px;\n  box-shadow: 2px 2px 2px rgba(0,0,0,0.2);\n  display: none;\n  box-sizing: border-box;\n}\n\n.ch-tooltip::after{\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n  content: "";\n  padding: 0;\n  display: block;\n  bottom: -6px;\n  left: 50%;\n  margin-left: -6px;\n    border-width: 6px 6px 0;\n    border-top-color: #222;\n}\n',""])},780:function(module,exports,__webpack_require__){var content=__webpack_require__(781);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(131)(content,options);content.locals&&(module.exports=content.locals)},781:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(130)(!1)).push([module.i,'/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * "License"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.cal_heatmap {\n  padding: 10px;\n  position: static !important;\n  overflow: auto !important;\n}\n\n.cal_heatmap .ch-tooltip {\n  margin-left: 20px;\n  margin-top: 5px;\n}\n',""])}}]);
//# sourceMappingURL=15.d950b67daa6032d6430a.bundle.js.map
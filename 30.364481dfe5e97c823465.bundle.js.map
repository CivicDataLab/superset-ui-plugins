{"version":3,"file":"30.364481dfe5e97c823465.bundle.js","sources":["webpack:///../superset-ui-legacy-plugin-chart-pivot-table/lib/PivotTable.js"],"sourcesContent":["\"use strict\";exports.__esModule=!0,exports.default=void 0;var _datatables=_interopRequireDefault(require(\"datatables.net-bs\")),_propTypes=_interopRequireDefault(require(\"prop-types\")),_numberFormat=require(\"@superset-ui/number-format\"),_fixTableHeight=_interopRequireDefault(require(\"./utils/fixTableHeight\"));require(\"datatables.net-bs/css/dataTables.bootstrap.css\");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */ /* eslint-disable sort-keys, no-magic-numbers, babel/no-invalid-this, babel/new-cap */var $=_datatables.default.$||window.$,propTypes={data:_propTypes.default.shape({// TODO: replace this with raw data in SIP-6\nhtml:_propTypes.default.string,columns:_propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.arrayOf(_propTypes.default.string)]))}),height:_propTypes.default.number,columnFormats:_propTypes.default.objectOf(_propTypes.default.string),numberFormat:_propTypes.default.string,numGroups:_propTypes.default.number,verboseMap:_propTypes.default.objectOf(_propTypes.default.string)};function PivotTable(a,b){var c=b.data,d=b.height,e=b.columnFormats,f=b.numberFormat,g=b.numGroups,h=b.verboseMap,i=c.html,j=c.columns,k=a,l=$(a);k.innerHTML=i;var m=Array.isArray(j[0])?j.map(function(a){return a[0]}):j,n=function(){var a=$(this)[0].textContent;$(this)[0].textContent=h[a]||a};// jQuery hack to set verbose names in headers\nif(l.find(\"thead tr:first th\").each(n),l.find(\"thead tr th:first-child\").each(n),l.find(\"tbody tr\").each(function(){$(this).find(\"td\").each(function(a){var b=m[a],c=e[b]||f||\".3s\",d=$(this)[0].textContent;Number.isNaN(d)||\"\"===d||($(this)[0].textContent=(0,_numberFormat.formatNumber)(c,d),$(this).attr(\"data-sort\",d))})}),1===g){k.style.overflow=\"hidden\";var o=l.find(\"table\").DataTable({paging:!1,searching:!1,bInfo:!1,scrollY:d+\"px\",scrollCollapse:!0,scrollX:!0});o.column(\"-1\").order(\"desc\").draw(),(0,_fixTableHeight.default)(l.find(\".dataTables_wrapper\"),d)}else// When there is more than 1 group by column we just render the table, without using\n// the DataTable plugin, so we need to handle the scrolling ourselves.\n// In this case the header is not fixed.\nk.style.overflow=\"auto\",k.style.height=d+10+\"px\"}PivotTable.displayName=\"PivotTable\",PivotTable.propTypes=propTypes;var _default=PivotTable;exports.default=_default;"],"mappings":"AAAA","sourceRoot":""}